@model LiGather.Model.WebDomain.TaskEntity

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>创建新任务</title>
    <link href="~/Content/bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div class="container">
        <br />
        <div class="col-lg-12">
            <div class="row">
                @using (Html.BeginForm("Create", "Crawler", FormMethod.Post, new { id = "taskForm", enctype = "multipart/form-data" }))
                {
                    @Html.HiddenFor(model => model.Unique, new { @Value = ViewBag.Unique })
                    @Html.AntiForgeryToken()
                    <div class="form-horizontal">
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        <div class="form-group">
                            @Html.LabelFor(model => model.TaskName, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.TaskName, new { htmlAttributes = new { @class = "form-control", @placeholder = "请输入任务名称", @required = "required" } })
                                @Html.ValidationMessageFor(model => model.TaskName, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.OperatorName, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.OperatorName, new { htmlAttributes = new { @class = "form-control", @placeholder = "请输入您的姓名", @required = "required" } })
                                @Html.ValidationMessageFor(model => model.OperatorName, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-2" for="txtfile">选择文件上传列表(.txt)</label>
                            <div class="col-md-10">
                                <input type="file" id="txtfile" name="txtfile">
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-offset-2 col-md-10">
                                <input type="button" id="butsubmit" class="btn btn-primary btn-block" value="提交任务" />
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
    <script src="~/Content/bootstrap/js/jquery-1.11.3.js"></script>
    <script src="~/Content/layer/layer.js"></script>
    <script src="~/Content/bootstrap/js/bootstrap.js" type="text/javascript"></script>
    <script src="~/Scripts/jquery.form.js"></script>
    <script type="text/javascript">
        $("#butsubmit").click(function () {
            var index = layer.load();
            var options = {
                success: function (data) {
                    layer.close(index);
                    console.debug(data);
                    parent.layer.alert(data.msg, function (index) {
                        layer.close(index);
                        parent.layer.close(parent.layer.getFrameIndex(window.name));
                    });
                }
            };
            $("#taskForm").ajaxSubmit(options);
        });
    </script>
</body>
</html>
